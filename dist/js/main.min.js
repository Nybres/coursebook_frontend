"use strict";addEventListener("DOMContentLoaded",function(e){function n(e){e.classList.add("overlay--active"),document.body.classList.add("no-scroll")}var t,o,r,c,a=!1,i=document.querySelectorAll(".alert"),s=(i&&i.forEach(function(e){setTimeout(function(){e.classList.add("alert__hide")},2e3)}),document.querySelector(".drawer")),d=(s&&(t=document.querySelector(".overlay"),i=document.querySelector(".jsAccountAdd"),o=s.querySelector(".drawer__back"),i.addEventListener("click",function(){s.classList.add("drawer--active"),n(t),a=!1}),o.addEventListener("click",function(){s.classList.remove("drawer--active"),t.classList.remove("overlay--active"),document.body.classList.remove("no-scroll")})),document.querySelector(".nav")),l=(d&&window.addEventListener("scroll",function(){148<window.scrollY?d.classList.add("nav--shadow"):d.classList.remove("nav--shadow")}),document.querySelector(".jsCourseForm")),u=(l&&l.addEventListener("submit",function(e){e.preventDefault();var r=new FormData(l),e=(l.querySelectorAll('input[type="file"]').forEach(function(e){for(var t=e.files,n=0;n<t.length;n++){var o=t[n];r.append("uploaded_images",o)}}),r.get("csrfmiddlewaretoken"));fetch("/account-courses",{method:"POST",headers:{"X-CSRFToken":e},body:r}).then(function(e){console.log(e),e.ok,location.reload()}).catch(function(e){console.log(e)})}),document.querySelector(".jsInstructorForm")),i=(document.querySelectorAll(".jsInstructorEdit").forEach(function(t){t.addEventListener("click",function(e){a=!0,r=t.dataset.id,fetch("/edit-instructor/"+r,{method:"GET"}).then(function(e){return e.json()}).then(function(e){var t=document.querySelector(".overlay");n(t),s.classList.add("drawer--active"),u.querySelector("[name='first_name']").value=e.first_name,u.querySelector("[name='last_name']").value=e.last_name,u.querySelector("[name='description']").value=e.description,e.photo&&(u.querySelector(".photo-preview").src=e.photo_thumb)})})}),u&&u.addEventListener("submit",function(e){e.preventDefault();var e=new FormData(u),t=e.get("csrfmiddlewaretoken");fetch(a?"/edit-instructor/"+r:"/account-instructors",{method:a?"PUT":"POST",headers:{"X-CSRFToken":t},body:e}).then(function(e){u.reset(),console.log(e),e.ok,location.reload()}).catch(function(e){console.log(e)})}),document.querySelector(".jsAddImage"));i&&(c=document.querySelector(".form__images"),i.addEventListener("click",function(e){e.preventDefault();var r=document.createElement("input");r.classList.add("form__group-input"),r.type="file",r.name="images",r.addEventListener("change",function(e){var t,n,o,e=e.target.files[0];e&&(t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("img"),t.classList.add("form__images-image"),n.classList.add("form__images-delete"),n.innerHTML='\n\t\t  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"\n\t\t  fill="none" stroke="white" stroke-width="2" stroke-linecap="round"\n\t\t  stroke-linejoin="round" class="feather feather-x">\n\t\t  <line x1="18" y1="6" x2="6" y2="18"></line>\n\t\t  <line x1="6" y1="6" x2="18" y2="18"></line>\n\t  \t\t</svg>\n\t  \t\t',o.width=150,o.height=150,o.loading="lazy",o.src="https://placehold.co/150x150?text=".concat(e.name),c.appendChild(t),t.appendChild(n),t.appendChild(o),t.insertBefore(r,t.lastChild),n.addEventListener("click",function(e){e.target.closest(".form__images-image").remove()}))}),r.click()}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiYmFja2Ryb3BBY3RpdmF0ZSIsIm92ZXJsYXkiLCJhZGQiLCJjbGFzc0xpc3QiLCJhY2NvdW50QWRkQnRuIiwiaW5zdHJ1Y3RvcklkIiwiaW1hZ2VFbGVtZW50IiwiaXNFZGl0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZHJhd2VyIiwiYWxlcnRzIiwic2V0VGltZW91dCIsImZvckVhY2giLCJkZWxleSIsInF1ZXJ5U2VsZWN0b3IiLCJuYXZpZ2F0aW9uRWxlbWVudCIsImRyYXdlckJhY2tCdG4iLCJyZW1vdmUiLCJoYW5kbGVTaGFkb3dOYXZpZ2F0aW9uIiwiYm9keSIsImZvcm0iLCJ3aW5kb3ciLCJzY3JvbGxZIiwiZmlsZUlucHV0cyIsImluc3RydWN0b3JGb3JtIiwiZmlsZXMiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsImkiLCJjc3JmVG9rZW4iLCJmaWxlIiwiaW5wdXQiLCJsZW5ndGgiLCJmZXRjaCIsIm1ldGhvZCIsImFwcGVuZCIsImhlYWRlcnMiLCJjb25zb2xlIiwicmVzcG9uc2UiLCJsb2NhdGlvbiIsIlgtQ1NSRlRva2VuIiwibG9nIiwib2siLCJyZWxvYWQiLCJlcnJvciIsImluc3RydWN0b3JFZGl0QnRucyIsImFkZEZvcm1JbWFnZSIsImJ0biIsInRoZW4iLCJkYXRhIiwianNvbiIsInBob3RvUHJldmlldyIsInBob3RvX3RodW1iIiwidmFsdWUiLCJmaXJzdF9uYW1lIiwicGhvdG8iLCJzcmMiLCJGb3JtRGF0YSIsImdldCIsImltYWdlc0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwibmFtZSIsImRlbGV0ZUVsZW1lbnQiLCJoZWlnaHQiLCJjb25jYXQiLCJpbWFnZUNvbnRhaW5lciIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZWxlbWVudFRvRGVsZXRlIiwiY2xpY2siLCJzZWxlY3RlZEZpbGUiLCJ0YXJnZXQiLCJpbm5lckhUTUwiLCJ3aWR0aCIsImxvYWRpbmciLCJsYXN0Q2hpbGQiLCJjbG9zZXN0Il0sIm1hcHBpbmdzIjoiYUFBQUEsaUJBQWlCLG1CQUFvQixTQUFBQyxHQVNuQyxTQUFBQyxFQUFBQyxHQUVBQSxFQUFNRCxVQUFnQkUsSUFBRyxpQkFBbkJGLEVBQ0pDLFNBQVFFLEtBQUFBLFVBQWNELElBQUEsV0FBaUIsQ0FFekMsQ0FiQSxJQXVCUUUsRUFHTkEsRUE4RXFDQyxFQStFL0JDLEVBdkxKQyxFQUFTLENBQUEsRUFEZlQsRUFBaUJVLFNBQUFDLGlCQUFvQixRQUFBVixFQXNCL0JXLEdBckJBSCxHQUNKSSxFQUFNQSxRQUFTSCxTQUFBQSxHQUNISSxXQUFBLFdBQ1ZELEVBQU9FLFVBQVFYLElBQUEsYUFBUyxDQUN0QixFQUFBLEdBQU1ZLENBR1IsQ0FBQyxFQWNTTixTQUFBTyxjQUFBLFNBQUEsR0E4QlpDLEdBN0JFTixJQUNNTixFQUFBQSxTQUFnQkksY0FBU08sVUFBYyxFQUN2Q0UsRUFBZ0JQLFNBQU9LLGNBQWMsZUFBZ0IsRUFFM0RYLEVBQWNOLEVBQUFBLGNBQTBCLGVBQU0sRUFBOUNNLEVBRUVKLGlCQUF5QixRQUFBLFdBQ3pCTyxFQUFNSixVQUFRRCxJQUFBLGdCQUFBLEVBQ2RGLEVBQUFDLENBQUEsRUFFRmdCLEVBQUFBLENBQUFBLENBRkEsQ0FBQyxFQUtEQSxFQUFFbkIsaUJBQUEsUUFBQSxXQUNKWSxFQUFBUCxVQUFBZSxPQUFBLGdCQUFBLEVBRU1DLEVBdEJJaEIsVUFBVWUsT0FBTyxpQkFBaUIsRUFDMUNWLFNBQVNZLEtBQUtqQixVQUFVZSxPQUFPLFdBQVcsQ0FzQjFDLENBQUEsR0FZRlYsU0FBQU8sY0FBQSxNQUFBLEdBT0lNLEdBTkpMLEdBQ0FNLE9BQVV4QixpQkFBWWlCLFNBWFMsV0FDN0IsSUFBQU8sT0FBQUMsUUFDRFAsRUFBQWIsVUFBQUQsSUFBQSxhQUFBLEVBR0djLEVBQWlCYixVQUFFZSxPQUFBLGFBQUEsQ0FFdkIsQ0FJb0QsRUFLMUNNLFNB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LE9BMUJadEMsRUEyQkhzQyxLQUFBQSxTQTFCR3RDLEVBMkJNbkMsaUJBQUEsU0FBQSxTQUFBNkIsR0FDSixJQUVJNkMsRUFDTlAsRUFDSjNELEVBSk1tRSxFQUFBOUMsRUFBQStDLE9BQUFoRCxNQUFBLEdBQ0ErQyxJQUNJRCxFQUFPaEUsU0FBQXNELGNBQUEsS0FBQSxFQUNiRyxFQUFBekQsU0FBQXNELGNBQUEsS0FBQSxFQUNKeEQsRUFBQUUsU0FBQXNELGNBQUEsS0FBQSxFQTFCUU0sRUFBZWpFLFVBQVVELElBQUksb0JBQW9CLEVBNEJ6RCtELEVBQUE5RCxVQUFBRCxJQUFBLHFCQUFBLEVBQ0ErRCxFQUFBVSxVQUFBLGlXQW5CUXJFLEVBQWFzRSxNQUFRLElBQ3JCdEUsRUFBYTRELE9BQVMsSUFDdEI1RCxFQUFhdUUsUUFBVSxPQUN2QnZFLEVBQWFvRCxJQUFHLHFDQUFBUyxPQUF3Q00sRUFBYVQsSUFBSSxFQUN6RUgsRUFBZ0JRLFlBQVlELENBQWMsRUFDMUNBLEVBQWVDLFlBQVlKLENBQWEsRUFDeENHLEVBQWVDLFlBQVkvRCxDQUFZLEVBQ3ZDOEQsRUFBZUUsYUFBYXJDLEVBQU9tQyxFQUFlVSxTQUFTLEVBQzNEYixFQUFjbkUsaUJBQWlCLFFBQVMsU0FBQTZCLEdBQ2RBLEVBQUUrQyxPQUFPSyxRQUFRLHFCQUFxQixFQUN2RDdELE9BQU8sQ0FDaEIsQ0FBQyxFQUVMLENBQUMsRUFDRGUsRUFBTXVDLE1BQU0sQ0FDZCxDQUFDLEVBSUwsQ0FBQyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGV2ZW50ID0+IHtcclxuICBsZXQgaXNFZGl0ID0gZmFsc2U7XHJcbiAgY29uc3QgYWxlcnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbGVydFwiKTtcclxuICBpZiAoYWxlcnRzKSB7XHJcbiAgICBhbGVydHMuZm9yRWFjaChhbGVydCA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbGV5ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZChcImFsZXJ0X19oaWRlXCIpO1xyXG4gICAgICB9LCAyMDAwKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYmFja2Ryb3BBY3RpdmF0ZSA9IG92ZXJsYXkgPT4ge1xyXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheS0tYWN0aXZlXCIpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibm8tc2Nyb2xsXCIpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGJhY2tkcm9wRGVBY3RpdmF0ZSA9IG92ZXJsYXkgPT4ge1xyXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmxheS0tYWN0aXZlXCIpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibm8tc2Nyb2xsXCIpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRyYXdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJhd2VyXCIpO1xyXG4gIGlmIChkcmF3ZXIpIHtcclxuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbiAgICBjb25zdCBhY2NvdW50QWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qc0FjY291bnRBZGRcIik7XHJcbiAgICBjb25zdCBkcmF3ZXJCYWNrQnRuID0gZHJhd2VyLnF1ZXJ5U2VsZWN0b3IoXCIuZHJhd2VyX19iYWNrXCIpO1xyXG5cclxuICAgIGFjY291bnRBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZHJhd2VyLmNsYXNzTGlzdC5hZGQoXCJkcmF3ZXItLWFjdGl2ZVwiKTtcclxuICAgICAgYmFja2Ryb3BBY3RpdmF0ZShvdmVybGF5KTtcclxuICAgICAgaXNFZGl0ID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkcmF3ZXJCYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGRyYXdlci5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhd2VyLS1hY3RpdmVcIik7XHJcbiAgICAgIGJhY2tkcm9wRGVBY3RpdmF0ZShvdmVybGF5KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaGFuZGxlU2hhZG93TmF2aWdhdGlvbiA9ICgpID0+IHtcclxuICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IDE0OCkge1xyXG4gICAgICBuYXZpZ2F0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibmF2LS1zaGFkb3dcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuYXZpZ2F0aW9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LS1zaGFkb3dcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbmF2aWdhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcclxuICBpZiAobmF2aWdhdGlvbkVsZW1lbnQpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNoYWRvd05hdmlnYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgLy8gICB0d29yemVuaWUga3Vyc3UgaSBpbnN0cnVrdG9yYVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qc0NvdXJzZUZvcm1cIik7XHJcbiAgaWYgKGZvcm0pIHtcclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcclxuICAgICAgY29uc3QgZmlsZUlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImZpbGVcIl0nKTtcclxuICAgICAgZmlsZUlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICBjb25zdCBmaWxlcyA9IGlucHV0LmZpbGVzO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1tpXTtcclxuICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInVwbG9hZGVkX2ltYWdlc1wiLCBmaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgY3NyZlRva2VuID0gZm9ybURhdGEuZ2V0KFwiY3NyZm1pZGRsZXdhcmV0b2tlblwiKTtcclxuXHJcbiAgICAgIGZldGNoKFwiL2FjY291bnQtY291cnNlc1wiLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBcIlgtQ1NSRlRva2VuXCI6IGNzcmZUb2tlbixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxyXG4gICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gICBwb3ByYXdpxIcgdGVnbyBKUyDFvGVieSBsZXBpZWogZHppYcWCYcWCXHJcbiAgLy8gICB6YW1pYXN0IGluc3RydWN0b3JJZCB3IGpzIGRvZGFjIGRvIGZvcm11bGFyemEgaW5wdXRhIGhpZGRlbiB6IElEIGkgcG9uaW0gcG90ZW0gcmVzenRlIGxvZ2lraVxyXG4gIC8vIGVkeWNqYSBpbnN0cnVrdG9yYVxyXG4gIC8vICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgY29uc3QgaW5zdHJ1Y3RvckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzSW5zdHJ1Y3RvckZvcm1cIik7XHJcbiAgY29uc3QgaW5zdHJ1Y3RvckVkaXRCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5qc0luc3RydWN0b3JFZGl0XCIpO1xyXG4gIGxldCBpbnN0cnVjdG9ySWQ7XHJcbiAgaW5zdHJ1Y3RvckVkaXRCdG5zLmZvckVhY2goYnRuID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgIGlzRWRpdCA9IHRydWU7XHJcbiAgICAgIGluc3RydWN0b3JJZCA9IGJ0bi5kYXRhc2V0LmlkO1xyXG4gICAgICBmZXRjaChcIi9lZGl0LWluc3RydWN0b3IvXCIgKyBpbnN0cnVjdG9ySWQsIHtcclxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuICAgICAgICAgIGJhY2tkcm9wQWN0aXZhdGUob3ZlcmxheSk7XHJcbiAgICAgICAgICBkcmF3ZXIuY2xhc3NMaXN0LmFkZChcImRyYXdlci0tYWN0aXZlXCIpO1xyXG4gICAgICAgICAgaW5zdHJ1Y3RvckZvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdmaXJzdF9uYW1lJ11cIikudmFsdWUgPVxyXG4gICAgICAgICAgICBkYXRhLmZpcnN0X25hbWU7XHJcbiAgICAgICAgICBpbnN0cnVjdG9yRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2xhc3RfbmFtZSddXCIpLnZhbHVlID1cclxuICAgICAgICAgICAgZGF0YS5sYXN0X25hbWU7XHJcbiAgICAgICAgICBpbnN0cnVjdG9yRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2Rlc2NyaXB0aW9uJ11cIikudmFsdWUgPVxyXG4gICAgICAgICAgICBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgLy8gdHUgdHJ6ZWJhIHptaWVuacSHIHBvdGVtIGJvIGNhxYJ5IGN6YXMgamVzdCBmb3JtIGkgamVzdCBtYXJnaW5lc1xyXG4gICAgICAgICAgaWYgKGRhdGEucGhvdG8pIHtcclxuICAgICAgICAgICAgY29uc3QgcGhvdG9QcmV2aWV3ID0gaW5zdHJ1Y3RvckZvcm0ucXVlcnlTZWxlY3RvcihcIi5waG90by1wcmV2aWV3XCIpO1xyXG4gICAgICAgICAgICBwaG90b1ByZXZpZXcuc3JjID0gZGF0YS5waG90b190aHVtYjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpZiAoaW5zdHJ1Y3RvckZvcm0pIHtcclxuICAgIGluc3RydWN0b3JGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaW5zdHJ1Y3RvckZvcm0pO1xyXG4gICAgICBjb25zdCBjc3JmVG9rZW4gPSBmb3JtRGF0YS5nZXQoXCJjc3JmbWlkZGxld2FyZXRva2VuXCIpO1xyXG4gICAgICBmZXRjaChcclxuICAgICAgICBpc0VkaXQgPyBcIi9lZGl0LWluc3RydWN0b3IvXCIgKyBpbnN0cnVjdG9ySWQgOiBcIi9hY2NvdW50LWluc3RydWN0b3JzXCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWV0aG9kOiBpc0VkaXQgPyBcIlBVVFwiIDogXCJQT1NUXCIsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIFwiWC1DU1JGVG9rZW5cIjogY3NyZlRva2VuLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgIGluc3RydWN0b3JGb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGFkZEZvcm1JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanNBZGRJbWFnZVwiKTtcclxuICBpZiAoYWRkRm9ybUltYWdlKSB7XHJcbiAgICBjb25zdCBpbWFnZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2ltYWdlc1wiKTtcclxuXHJcbiAgICBhZGRGb3JtSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9fZ3JvdXAtaW5wdXRcIik7XHJcbiAgICAgIGlucHV0LnR5cGUgPSBcImZpbGVcIjtcclxuICAgICAgaW5wdXQubmFtZSA9IFwiaW1hZ2VzXCI7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRGaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkRmlsZSkge1xyXG4gICAgICAgICAgY29uc3QgaW1hZ2VDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgY29uc3QgZGVsZXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgaW1hZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImZvcm1fX2ltYWdlcy1pbWFnZVwiKTtcclxuICAgICAgICAgIGRlbGV0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2ltYWdlcy1kZWxldGVcIik7XHJcbiAgICAgICAgICBkZWxldGVFbGVtZW50LmlubmVySFRNTCA9IGBcclxuXHRcdCAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcblx0XHQgIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwid2hpdGVcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiXHJcblx0XHQgIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJmZWF0aGVyIGZlYXRoZXIteFwiPlxyXG5cdFx0ICA8bGluZSB4MT1cIjE4XCIgeTE9XCI2XCIgeDI9XCI2XCIgeTI9XCIxOFwiPjwvbGluZT5cclxuXHRcdCAgPGxpbmUgeDE9XCI2XCIgeTE9XCI2XCIgeDI9XCIxOFwiIHkyPVwiMThcIj48L2xpbmU+XHJcblx0ICBcdFx0PC9zdmc+XHJcblx0ICBcdFx0YDtcclxuICAgICAgICAgIGltYWdlRWxlbWVudC53aWR0aCA9IDE1MDtcclxuICAgICAgICAgIGltYWdlRWxlbWVudC5oZWlnaHQgPSAxNTA7XHJcbiAgICAgICAgICBpbWFnZUVsZW1lbnQubG9hZGluZyA9IFwibGF6eVwiO1xyXG4gICAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IGBodHRwczovL3BsYWNlaG9sZC5jby8xNTB4MTUwP3RleHQ9JHtzZWxlY3RlZEZpbGUubmFtZX1gO1xyXG4gICAgICAgICAgaW1hZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKGltYWdlQ29udGFpbmVyKTtcclxuICAgICAgICAgIGltYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlbGV0ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgaW1hZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICAgIGltYWdlQ29udGFpbmVyLmluc2VydEJlZm9yZShpbnB1dCwgaW1hZ2VDb250YWluZXIubGFzdENoaWxkKTtcclxuICAgICAgICAgIGRlbGV0ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50VG9EZWxldGUgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmZvcm1fX2ltYWdlcy1pbWFnZVwiKTtcclxuXHRcdFx0ZWxlbWVudFRvRGVsZXRlLnJlbW92ZSgpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpbnB1dC5jbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBUSEUgRU5EXHJcbn0pO1xyXG4iXX0=
